@model IEnumerable<CanteenRFID.Core.Models.Stamp>
<h2>Stempelungen</h2>
<form class="row gy-2 align-items-end mb-3" method="get">
    <div class="col-md-3"><label class="form-label">Von</label><input type="datetime-local" class="form-control" name="from" /></div>
    <div class="col-md-3"><label class="form-label">Bis</label><input type="datetime-local" class="form-control" name="to" /></div>
    <div class="col-md-3"><label class="form-label">Suche</label><input class="form-control" name="search" placeholder="UID/Name/Reader" value="@Context.Request.Query["search"]" /></div>
    <div class="col-md-2"><label class="form-label">Meal Type</label><select class="form-select" name="mealType"><option value="">Alle</option>@foreach(var m in Enum.GetValues(typeof(MealType))){<option value="@m">@m</option>}</select></div>
    <div class="col-auto"><button class="btn btn-primary" type="submit">Aktualisieren</button></div>
</form>
<table class="table table-striped table-sm">
    <thead><tr><th>Zeit (UTC)</th><th>Lokale Zeit</th><th>UID</th><th>Person</th><th>Reader</th><th>Meal</th></tr></thead>
    <tbody>
    @foreach(var s in Model){
        <tr class="@(s.User == null ? "table-warning" : "")">
            <td>@s.TimestampUtc</td>
            <td>@s.TimestampLocal</td>
            <td>@s.UidRaw</td>
            <td>@(s.User?.FullName ?? "Unbekannt")</td>
            <td>@s.ReaderId</td>
            <td>@s.MealType</td>
        </tr>
    }
    </tbody>
</table>
